/*!
 * project : bank
 * author : LINOFFICE
 * 계좌 등록
 */ let bank_singleton=null,bank_singletonEnforcer="singletonEnforcer";class Bank{constructor(e){if(e!==bank_singletonEnforcer)throw"Cannot--construct singleton";this.init()}static get instance(){return bank_singleton||(bank_singleton=new Bank(bank_singletonEnforcer)),bank_singleton}init(){let e=this;includeHTML(document.querySelector("#svg-container"),"https://cdn.jsdelivr.net/gh/pjs4020032303-coder/web/svg.html",cacheVersion),e.param={bank_name:void 0,bank_number:void 0,owner_name:void 0,phone:void 0},e.regist_lock=!1,e.init_progress()}init_progress(){let e=this,n=`<section class="init_section"><div class="message_area"><h1>계좌 등록 안내</h1><ul>${regist_message}</ul></div><div class="btn_wrap"><button type="button" class="btn"><span>다음</span></button></div></section>`;$(".regist_container").html(n),document.querySelector(".init_section .btn_wrap .btn").addEventListener("click",n=>{e.setting_progress()})}setting_progress(){let e=this;e.param.bank_name=e.param.bank_number=e.param.owner_name=e.param.phone=void 0,$(".regist_container").html('<section class="setting_section"><div class="message_area"><p>계좌를 설정하십시오.</p></div><div class="input_area"><div class="input_box"><label>은행명</label><input type="text" autocomplete="off" placeholder="은행명을 입력해주세요" id="reg_bank_name" maxlength="10"></div><div class="input_box"><label>계좌번호</label><input type="text" autocomplete="off" placeholder="계좌번호를 입력해주세요" id="reg_bank_number" maxlength="20"></div><div class="input_box"><label>계좌주</label><input type="text" autocomplete="off" placeholder="계좌주를 입력해주세요" id="reg_owner_name" maxlength="10"></div><div class="input_box"><label>연락처</label><input type="text" autocomplete="off" placeholder="연락처를 입력해주세요" id="reg_phone" maxlength="13" onKeyup="OnCheckPhone(this);"></div></div><div class="btn_wrap"><button type="button" class="btn left"><span>이전</span></button><button type="button" class="btn right"><span>다음</span></button></div></section>'),bank&&($("#reg_bank_name").val(bank.bank_name),$("#reg_bank_number").val(bank.bank_number),$("#reg_owner_name").val(bank.owner_name),$("#reg_phone").val(bank.phone)),document.querySelector(".setting_section .btn_wrap .btn.left").addEventListener("click",n=>{e.init_progress()}),document.querySelector(".setting_section .btn_wrap .btn.right").addEventListener("click",n=>{e.finish_progress()})}finish_progress(){let e=this,n=$("#reg_bank_name").val();if(!n){ncuim_modal_show("은행명이 설정되지 않았습니다.");return}let t=$("#reg_bank_number").val();if(!t){ncuim_modal_show("계좌번호가 설정되지 않았습니다.");return}let a=$("#reg_owner_name").val();if(!a){ncuim_modal_show("계좌주가 설정되지 않았습니다.");return}let s=$("#reg_phone").val();if(!s||13!=s.length){ncuim_modal_show("연락처가 설정되지 않았습니다.");return}if(bank&&n==bank.bank_name&&t==bank.bank_number&&a==bank.owner_name&&s==bank.phone){ncuim_modal_show("변경된 데이터가 없습니다.");return}e.param.bank_name=n,e.param.bank_number=t,e.param.owner_name=a,e.param.phone=s;let i=`<section class="finish_section"><div class="message_area"><p>${bank?`정보를 확인 후 변경 버튼을 눌러주세요.`:`정보를 확인 후 등록 버튼을 눌러주세요.`}</p></div><div class="finish_area"><div class="seller_bank txt">은행: <span>${e.param.bank_name}</span></div><div class="seller_bank_number txt">계좌번호: <span>${e.param.bank_number}</span></div><div class="seller_banker txt">계좌주: <span>${e.param.owner_name}</span></div><div class="seller_phone txt">연락처: <span>${e.param.phone}</span></div></div><div class="btn_wrap"><button type="button" class="btn left"><span>이전</span></button><button type="button" class="btn right"><span>${bank?`변경`:`등록`}</span></button></div></section>`;$(".regist_container").html(i),document.querySelector(".finish_section .btn_wrap .btn.left").addEventListener("click",n=>{e.setting_progress()}),document.querySelector(".finish_section .btn_wrap .btn.right").addEventListener("click",n=>{e.regist()})}finish_close(){window.self.opener?(window.opener.location.reload(),window.self.close()):history.back()}regist(){let e=this;!e.regist_lock&&(e.regist_lock=!0,getDatasWithOption([{type:"POST",url:"/define/bank/regist",dataType:"json",contentType:"application/json",Accept:"application/json",data:e.param}],n=>{switch(n){case 1:ncuim_modal_show(bank?"정상적으로 변경되었습니다.":"정상적으로 등록되었습니다.",null,"Bank.instance.finish_close()");break;case 2:ncuim_modal_show("계정을 찾을 수 없습니다.");break;default:ncuim_modal_show(bank?"변경에 실패하였습니다.":"등록에 실패하였습니다.")}e.regist_lock=!1},n=>{e.regist_lock=!1}))}}Bank.instance;