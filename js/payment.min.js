/*!
 * project : iamport
 * author : LINOFFICE
 * N코인 결재
 */ function finish_charge(){popupClose(),window.self.opener?(window.opener.location.reload(),window.self.close()):history.back()}function createOrderNum(){let a=new Date,s=a.getFullYear(),e=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getDate()).padStart(2,"0"),n=s+e+c;for(let r=0;r<5;r++)n+=Math.floor(8*Math.random());return parseInt(n)}document.addEventListener("contextmenu",a=>a.preventDefault()),$(function(){let a=window.IMP;a.init(iamportApiCode),a.request_pay({pg:"kakaopay",pay_method:"card",merchant_uid:createOrderNum(),name:`N코인 ${chargeAmount} 포인트 결재`,amount:chargeAmount,buyer_name:account.firstChar.name},function(a){a.success?getDatasWithOption([{type:"POST",url:"/define/charge",dataType:"json",contentType:"application/json",Accept:"application/json",data:{imp_uid:a.imp_uid,merchant_uid:a.merchant_uid,apply_num:a.apply_num,paid_amount:a.paid_amount}}],a=>{switch(a){case 1:popupShow("정상적으로 결재가 완료되었습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 2:popupShow("고유 번호가 누락되었습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 3:popupShow("결재 시스템이 사용중이지 않습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 4:popupShow("인게임에서 결재하실 수 있습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 5:popupShow("계정을 찾을 수 없습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 6:popupShow("대표 캐릭터를 찾을 수 없습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 7:popupShow("월드 내 캐릭터가 존재하지 않습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 8:popupShow("검증에 필요한 파라미터가 누락되었습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 9:popupShow("결재 정보가 올바르지 않습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;default:popupShow("결재에 실패하였습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null)}},a=>{popupShow("결재 검증에 실패하였습니다.\r\nREGIST_FAILURE",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null)}):popupShow("결재에 실패하였습니다.\r\nMESSAGE : "+a.error_msg,'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null)})});